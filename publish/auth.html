<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google-adsense-account" content="ca-pub-4711764274538281">
    <title>Admin Auth</title>
    <link rel="icon" href="https://i.ibb.co/SXS3ckB/20231003-050505.png"/>
    <link rel="stylesheet" href="bootstrap.min.css" />
    <link rel="stylesheet" href="style.min.css" />
    <link rel="stylesheet" href="style2.css" />
  </head>
  <body>
    <div class="container mt-5">
      <h2>Login</h2>
      <form id="loginForm">
        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <input type="email" class="form-control" id="email" required />
        </div>
        <div class="mb-3">
          <label for="password" class="form-label">Password</label>
          <input type="password" class="form-control" id="password" required />
        </div>
        <button type="submit" class="btn btn-primary">Login</button>
      </form>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-app-check-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.6.0/firebase-auth-compat.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://www.google.com/recaptcha/api.js?render=6LfhzAspAAAAAJl0OhxEbxi2b81mbd-SD9Ybk790"></script>

    <script>
      // Firebase Configuration
      const firebaseConfig = {
        apiKey: "AIzaSyAXQyIedd_BFHkZ7M8FSVyhdWeIM6kq8dU",
        authDomain: "mod-store-8bce7.firebaseapp.com",
        databaseURL:
          "https://mod-store-8bce7-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "mod-store-8bce7",
        storageBucket: "mod-store-8bce7.appspot.com",
        messagingSenderId: "671264986944",
        appId: "1:671264986944:web:47377a33cb39432d5acca5",
        measurementId: "G-MKWHRDQRPM",
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const appCheck = firebase.appCheck();
      appCheck.activate("6LfhzAspAAAAAJl0OhxEbxi2b81mbd-SD9Ybk790", true);
      const db = firebase.database();
      // Firebase Authentication
      const auth = firebase.auth();

      // Function to handle login form submission
      document
        .getElementById("loginForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();
          const email = document.getElementById("email").value;
          const password = document.getElementById("password").value;

          // Sign in the user with email and password
          auth
            .signInWithEmailAndPassword(email, password)
            .then((userCredential) => {
              // Redirect to mod addition page on successful login
              window.location.href = "index.html";
            })
            .catch((error) => {
              // Handle login errors
              alert("Login failed: " + error.message);
            });
        });

      // Monitoring authentication state changes
      auth.onAuthStateChanged((user) => {
        if (user) {
          // User is signed in, redirect to mod addition page
          window.location.href = "index.html";
        } else {
          // User is signed out
          // You may handle this case if needed
        }
      });
    </script>
  </body>
</html>
